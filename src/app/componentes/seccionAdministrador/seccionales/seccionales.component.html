<section class="mt-5 text-center position-relative">
  <h3 class="fw-bold text-dark mb-4 position-relative d-inline-block" style="font-size: 2rem;">
    Lista de Seccionales
    <span class="titulo-sections"></span>
  </h3>
</section>

<div class="VentanaNivel0">
  <div class="seccionales-grid" *ngIf="seccionalesLocal.length > 0">
    <div *ngFor="let seccional of seccionalesLocal; let i = index" class="VentanaNivel1 seccional-card">
      
      <div class="seccional-header">
        {{ seccional.nombre }}
      </div>

      <div class="seccional-imagen">
        <img [src]="imagen(i)" alt="Logo de seccional" width="150" height="150">
      </div>

      
      <!-- Info básica debajo de la imagen -->
        <div class="seccional-info">
          <p>Dirección: {{ seccional.direccion }}</p>
          <p>Localidad: {{ seccional.ciudad }}</p>
          <p>Provincia: {{ seccional.provincia }}</p>
          <p>Teléfono: {{ seccional.telefono }}</p>
          <p>Email: {{ seccional.email }}</p>
        </div>

      <!-- Botón para ver especialidades (modal) 
        <button *ngIf="perfilActivo?.rol === 'administrador'" (click)="abrirModal(seccional)">
          Ver especialidades
        </button>

       Modal sencillo 
      <div class="modal" *ngIf="modalAbierto">
        <div class="modal-contenido">
          <h3>{{ seccionalSeleccionada?.nombre }}</h3>
          <p *ngFor="let esp of seccionalSeleccionada?.especialidades">
            - {{ esp.nombre }} ({{ esp.duracion }} min)
          </p>
          <button (click)="cerrarModal()">Cerrar</button>
        </div>
      </div>
      -->

      <ng-container *ngIf="perfilActivo">
        <div *ngIf="perfilActivo.rol === 'administrador'" class="seccional-admin">
          {{ seccional.nombre }} *placeholder*

          <button name="botonEditarSeccional" (click)="mostrarPanelEditarSeccional(i)">
            Editar seccional
          </button>

          <div *ngIf="mostrarPanelEditar[i]" class="VentanaNivel1 seccional-editar">
            <label for="nombre">Nombre:</label>
            <input type="text" [(ngModel)]="seccionalEditada.nombre" required />

            <label for="direccion">Dirección:</label>
            <input type="text" [(ngModel)]="seccionalEditada.direccion" required />

            <label for="ciudad">Ciudad:</label>
            <input type="text" [(ngModel)]="seccionalEditada.ciudad" required />

            <label for="provincia">Provincia:</label>
            <input type="text" [(ngModel)]="seccionalEditada.provincia" required />

            <label for="telefono">Teléfono:</label>
            <input type="text" [(ngModel)]="seccionalEditada.telefono" required />

            <label for="email">Email:</label>
            <input type="text" [(ngModel)]="seccionalEditada.email" required />

            <div class="botones-editar">
              <button (click)="editarSeccional()">Guardar cambios</button>
              <button (click)="cerrarPaneles()">Cancelar</button>
            </div>
          </div>

          <button name="botonEliminarSeccional" (click)="eliminarSeccional(seccional)">
            Eliminar seccional
          </button>
        </div>
      </ng-container>

    </div>
  </div>

  <ng-container *ngIf="perfilActivo">
    <div *ngIf="perfilActivo.rol === 'administrador'" class="seccional-agregar">
      <button name="botonAgregarSeccional" (click)="mostrarPanelNuevaSeccional()">Agregar seccional</button>
      <div *ngIf="mostrarPanelNueva">
        <app-nueva-seccional></app-nueva-seccional>
      </div>
    </div>
  </ng-container>

  <div class="VentanaNivel0 exportar">
    <button name="exportarExcel" (click)="exportarCSV()">Exportar</button>
  </div>
</div>